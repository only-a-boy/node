"use strict";function swapCheck(){isCheckAll?($("input[type='checkbox']").each(function(){this.checked=!1}),isCheckAll=!1):($("input[type='checkbox']").each(function(){this.checked=!0}),isCheckAll=!0)}function display(){len=$("#carInfo tr").length-1,page=len%pageSize==0?len/pageSize:Math.floor(len/pageSize)+1,curPage=1,displayPage(1),$("#btn0").html("当前 "+curPage+"/"+page+" 页    每页 "),$("#count").html("数据总量 "+len+"   "),$("#pageSize").val(pageSize),$("#btn1").click(function(){curPage=1,direct=0,displayPage()}),$("#btn2").click(function(){direct=-1,displayPage()}),$("#btn3").click(function(){direct=1,displayPage()}),$("#btn4").click(function(){curPage=page,direct=0,displayPage()}),$("#btn5").click(function(){return curPage=1*$("#changePage").val(),/^[1-9]\d*$/.test(curPage)?curPage>page?void alert("超出数据页面"):(direct=0,void displayPage()):void alert("请输入正整数")}),$("#pageSizeSet").click(function(){if(pageSize=$("#pageSize").val(),!/^[1-9]\d*$/.test(pageSize))return void alert("请输入正整数");len=$("#carInfo tr").length-1,page=len%pageSize==0?len/pageSize:Math.floor(len/pageSize)+1,curPage=1,direct=0,displayPage()})}function displayPage(){return curPage<=1&&direct==-1?(direct=0,void alert("已经是第一页了")):curPage>=page&&1==direct?(direct=0,void alert("已经是最后一页了")):(lastPage=curPage,curPage=len>pageSize?(curPage+direct+len)%len:1,0==curPage&&(curPage=page),$("#btn0").html("当前 "+curPage+"/"+page+" 页    每页 "),begin=(curPage-1)*pageSize+1,end=begin+1*pageSize-1,end>len&&(end=len),$("#carInfo tr").hide(),void $("#carInfo tr").each(function(e){(e>=begin&&e<=end||0==e)&&$(this).show()}))}$(document).ready(function(){$.ajax({url:"/car",async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){if(e){e=JSON.parse(e);for(var a="",t=0;t<e.length;t++){var c=e[t],n=c.car_id,i=c.vin;a+='\n            <tr>\n              <td><input type="checkbox" name="carCheckBox" value= '+i+"></td>\n              <td>"+n+"</td>\n              <td>"+i+"</td>\n              <td>"+c.engine_no+"</td>\n              <td>"+c.model+"</td>\n              <td>"+c.color+"</td>\n              <td>"+c.address+"</td>\n              <td>"+c.car_card+"</td>\n              <td>"+c.city_name+"</td>\n              <td>"+c.model_year+"</td>\n              <td>"+c.purchase_date+"</td>\n              <td>"+c.memo+"</td>\n            </tr>\n        "}$("#carData").html(a),display()}else alert("数据传输有错误！")}})}),$("#delCarClick").click(function(){for(var e=$("input[name='carCheckBox']"),a="",t=0,c=0;c<e.length;c++)e[c].checked&&(a+=e[c].value,t++);1==t?$.ajax({url:"/delCar",data:{vin:a},async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){"true"==e?(alert("删除车辆成功"),location.href="/car"):alert("数据传输有错误！")}}):0==t?alert("您还没有选择车辆"):alert("请只选择一个车辆")}),$("#editCarClick").click(function(){for(var e=$("input[name='carCheckBox']"),a="",t=0,c=0;c<e.length;c++)e[c].checked&&(a+=e[c].value,t++);1==t?location.href=encodeURI("/editCar?vin="+a):0==t?alert("您还没有选择车辆"):alert("请只选择一个车辆")}),$("#viewCarClick").click(function(){for(var e=$("input[name='carCheckBox']"),a="",t=0,c=0;c<e.length;c++)e[c].checked&&(a+=e[c].value,t++);1==t?location.href=encodeURI("/viewCar?vin="+a):0==t?alert("您还没有选择车辆"):alert("请只选择一个车辆")});var isCheckAll=!1,pageSize=10,curPage=0,lastPage,direct=0,len,page,begin,end;