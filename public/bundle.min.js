"use strict";function swapCheck(){isCheckAll?($("input[type='checkbox']").each(function(){this.checked=!1}),isCheckAll=!1):($("input[type='checkbox']").each(function(){this.checked=!0}),isCheckAll=!0)}function showList(e,a,t,r,n,c,d,l,s,o,i){function u(){return g<=1&&k==-1?(k=0,void alert("已经是第一页了")):g>=v&&1==k?(k=0,void alert("已经是最后一页了")):(h=g,g=m>y?(g+k+m)%m:1,0==g&&(g=v),$(a).html("当前 "+g+"/"+v+" 页    每页 "),p=(g-1)*y+1,f=p+1*y-1,f>m&&(f=m),$(e).hide(),void $(e).each(function(e){(e>=p&&e<=f||0==e)&&$(this).show()}))}var h,m,v,p,f,y=10,g=0,k=0;this.display=function(){m=$(e).length-1,v=m%y==0?m/y:Math.floor(m/y)+1,g=1,u(),$(a).html("当前 "+g+"/"+v+" 页    每页 "),$(l).html("数据总量 "+m+"   "),$(s).val(y),$(t).click(function(){g=1,k=0,u()}),$(r).click(function(){k=-1,u()}),$(n).click(function(){k=1,u()}),$(c).click(function(){g=v,k=0,u()}),$(d).click(function(){return g=1*$(i).val(),/^[1-9]\d*$/.test(g)?g>v?void alert("超出数据页面"):(k=0,void u()):void alert("请输入正整数")}),$(o).click(function(){if(y=$(s).val(),!/^[1-9]\d*$/.test(y))return void alert("请输入正整数");m=$(e).length-1,v=m%y==0?m/y:Math.floor(m/y)+1,g=1,k=0,u()})}}function showInfoList(e,a,t,r,n,c,d,l,s,o,i){return new showList(e,a,t,r,n,c,d,l,s,o,i).display()}$.getUrlParam=function(e){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(a);return null!=t?decodeURI(t[2]):null};var isCheckAll=!1;$(document).ready(function(){$("#login").click(function(e){e.preventDefault(),""==$("#logUsername").val()?alert("用户名不能为空"):$.ajax({url:"/login",type:"POST",data:{username:$("#logUsername").val(),password:$("#logPassword").val()},async:!0,cache:!1,dataType:"text",success:function(e){"false1"==e&&alert("没有此用户"),"false2"==e&&alert("密码错误"),"true"==e&&(location.href="/home")}})})}),$(document).ready(function(){$("#register").click(function(e){e.preventDefault(),""==$("#RegUsername").val()||""==$("#RegPassword").val()?alert("用户名或者密码不能为空"):$.ajax({url:"/register",type:"POST",data:{username:$("#RegUsername").val(),password:$("#RegPassword").val()},async:!0,cache:!1,dataType:"text",success:function(e){"false1"==e&&alert("此用户名已经被使用"),"true"==e&&(alert("注册成功"),location.href="/login")}})})}),$("#addCar").click(function(e){e.preventDefault();var a=$("#addVin").val();""==a?alert("车辆vin不能为空"):$.ajax({url:"/addCar",data:{addVin:a,addEngineNo:$("#addEngineNo").val(),addModel:$("#addModel").val(),addColor:$("#addColor").val(),addAddress:$("#addAddress").val(),addCarCard:$("#addCarCard").val(),addCityName:$("#addCityName").val(),addModelYear:$("#addModelYear").val(),addPurchaseDate:$("#addPurchaseDate").val(),addCarType:$("#addCarType").val(),addMemo:$("#addMemo").val(),addStatus:$("#addStatus").val(),addCreateUserId:$("#addCreateUserId").val(),addCreateTime:$("#addCreateTime").val()},async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){"true"==e?(alert("新增车辆成功"),location.href="/car"):"false"==e?alert("已有此车辆vin"):alert("数据传输错误！")}})}),$(document).ready(function(){$.ajax({url:"/car",async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){if(e){e=JSON.parse(e);for(var a="",t=0;t<e.length;t++){var r=e[t],n=r.car_id,c=r.vin;a+='\n            <tr>\n              <td><input type="checkbox" name="carCheckBox" value= '+c+"></td>\n              <td>"+n+"</td>\n              <td>"+c+"</td>\n              <td>"+r.engine_no+"</td>\n              <td>"+r.model+"</td>\n              <td>"+r.color+"</td>\n              <td>"+r.address+"</td>\n              <td>"+r.car_card+"</td>\n              <td>"+r.city_name+"</td>\n              <td>"+r.model_year+"</td>\n              <td>"+r.purchase_date+"</td>\n              <td>"+r.memo+"</td>\n            </tr>\n        "}$("#carData").html(a),showInfoList("#carInfo tr","#btn0","#btn1","#btn2","#btn3","#btn4","#btn5","#count","#pageSize","#pageSizeSet","#changePage")}else alert("数据传输有错误!")}})}),$("#delCarClick").click(function(){for(var e=$("input[name='carCheckBox']"),a="",t=0,r=0;r<e.length;r++)e[r].checked&&(a+=e[r].value,t++);1==t?$.ajax({url:"/delCar",data:{vin:a},async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){"true"==e?(alert("删除车辆成功"),location.href="/car"):alert("数据传输有错误!")}}):0==t?alert("您还没有选择车辆"):alert("请只选择一个车辆")}),$("#editCarClick").click(function(){for(var e=$("input[name='carCheckBox']"),a="",t=0,r=0;r<e.length;r++)e[r].checked&&(a+=e[r].value,t++);1==t?location.href=encodeURI("/editCar?vin="+a):0==t?alert("您还没有选择车辆"):alert("请只选择一个车辆")}),$("#viewCarClick").click(function(){for(var e=$("input[name='carCheckBox']"),a="",t=0,r=0;r<e.length;r++)e[r].checked&&(a+=e[r].value,t++);1==t?location.href=encodeURI("/viewCar?vin="+a):0==t?alert("您还没有选择车辆"):alert("请只选择一个车辆")});var vin=$.getUrlParam("vin");$.ajax({url:"/editCar",type:"POST",data:{vin:vin},async:!0,cache:!1,dataType:"text",success:function(e){if(e){var a=JSON.parse(e)[0],t=a.car_id,r=a.vin,n=a.engine_no,c=a.model,d=a.color,l=a.address,s=a.car_card,o=a.city_name,i=a.model_year,u=a.purchase_date,h=a.car_type,m=a.memo,v=a.status,p=a.create_user_id,f=a.create_time;$("#carId").html(t),$("#vin").html(r),$("#engineNo").val(n),$("#model").val(c),$("#color").val(d),$("#address").val(l),$("#carCard").val(s),$("#cityName").val(o),$("#modelYear").val(i),$("#purchaseDate").val(u),$("#carType").val(h),$("#memo").val(m),$("#status").val(v),$("#createUserId").val(p),$("#createTime").val(f)}else alert("数据传输有错误!")}}),$("#confirmCar").click(function(){$.ajax({url:"/updateCar",type:"POST",data:{carId:$("#carId").html(),vin:$("#vin").html(),engineNo:$("#engineNo").val(),model:$("#model").val(),color:$("#color").val(),address:$("#address").val(),carCard:$("#carCard").val(),cityName:$("#cityName").val(),modelYear:$("#modelYear").val(),purchaseDate:$("#purchaseDate").val(),carType:$("#carType").val(),memo:$("#memo").val(),status:$("#status").val(),createUserId:$("#createUserId").val(),createTime:$("#createTime").val()},async:!0,cache:!1,dataType:"text",success:function(e){"true"==e&&(alert("修改车辆信息成功"),location.href="/car")}})}),$("#selCarBtn").click(function(){$.ajax({url:"/selectCar",data:{vin:$("#selectVin").val(),engineNo:$("#selectEngineNo").val(),model:$("#selectModel").val(),color:$("#selectColor").val()},async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){if(e){e=JSON.parse(e);for(var a="",t=0;t<e.length;t++){var r=e[t],n=r.car_id,c=r.vin;a+='\n            <tr>\n              <td><input type="checkbox" name="carCheckBox" value= '+c+"></td>\n              <td>"+n+"</td>\n              <td>"+c+"</td>\n              <td>"+r.engine_no+"</td>\n              <td>"+r.model+"</td>\n              <td>"+r.color+"</td>\n              <td>"+r.address+"</td>\n              <td>"+r.car_card+"</td>\n              <td>"+r.city_name+"</td>\n              <td>"+r.model_year+"</td>\n              <td>"+r.purchase_date+"</td>\n              <td>"+r.memo+"</td>\n            </tr>\n        "}$("#carData").html(a),showInfoList("#carInfo tr","#btn0","#btn1","#btn2","#btn3","#btn4","#btn5","#count","#pageSize","#pageSizeSet","#changePage")}else alert("数据传输有错误!")}})});var vin=$.getUrlParam("vin");$.ajax({url:"/viewCar",type:"POST",data:{vin:vin},async:!0,cache:!1,dataType:"text",success:function(e){var a=JSON.parse(e)[0],t=a.car_id,r=a.vin,n=a.engine_no,c=a.model,d=a.color,l=a.address,s=a.car_card,o=a.city_name,i=a.model_year,u=a.purchase_date,h=a.car_type,m=a.memo,v=a.status,p=a.create_user_id,f=a.create_time;$("#carId").html(t),$("#vin").html(r),$("#engineNo").html(n),$("#model").html(c),$("#color").html(d),$("#address").html(l),$("#carCard").html(s),$("#cityName").html(o),$("#modelYear").html(i),$("#purchaseDate").html(u),$("#carType").html(h),$("#memo").html(m),$("#status").html(v),$("#createUserId").html(p),$("#createTime").html(f)}}),$("#addUser").click(function(e){e.preventDefault();var a=$("#addUserName").val();""==a?alert("用户名不能为空"):$.ajax({url:"/addUser",data:{username:a,password:$("#addPassword").val()},async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){"true"==e?(alert("新增用户成功"),location.href="/users"):"false"==e?alert("已有此用户名"):alert("数据传输错误")}})});var username=$.getUrlParam("username");$.ajax({url:"/editUser",data:{username:username},async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){if(e){var a=JSON.parse(e)[0],t=a.id,r=a.username,n=a.password;$("#id").html(t),$("#username").html(r),$("#password").val(n)}else alert("数据传输有错误！")}}),$("#confirmUser").click(function(){$.ajax({url:"/updateUser",data:{username:username,password:$("#password").val()},async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){"true"==e?(alert("修改成功"),location.href="/users"):alert("数据传输有错误!")}})}),$("#selUserBtn").click(function(){$.ajax({url:"/selectUser",data:{username:$("#selectUser").val()},async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){if(e){e=JSON.parse(e);for(var a="",t=0;t<e.length;t++){var r=e[t],n=r.id,c=r.username;a+="\n            <tr><td><input type='checkbox' name='userCheckBox' value="+c+"></td>\n              <td>"+n+"</td>\n              <td>"+c+"</td>\n              <td>"+r.password+"</td> \n            </tr>\n        "}$("#userData").html(a),showInfoList("#userInfo tr","#btn00","#btn01","#btn02","#btn03","#btn04","#btn05","#count0","#pageSize0","#pageSizeSet0","#changePage0")}else alert("数据传输有错误!")}})}),$(document).ready(function(){$.ajax({url:"/users",async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){if(e){e=JSON.parse(e);for(var a="",t=0;t<e.length;t++){var r=e[t],n=r.id,c=r.username;a+="\n            <tr><td><input type='checkbox' name='userCheckBox' value="+c+"></td>\n              <td>"+n+"</td>\n              <td>"+c+"</td>\n              <td>"+r.password+"</td> \n            </tr>\n        "}$("#userData").html(a),showInfoList("#userInfo tr","#btn00","#btn01","#btn02","#btn03","#btn04","#btn05","#count0","#pageSize0","#pageSizeSet0","#changePage0")}else alert("数据传输有错误!")}})}),$("#viewUserClick").click(function(){for(var e=$("input[name='userCheckBox']"),a="",t=0,r=0;r<e.length;r++)e[r].checked&&(a+=e[r].value,t++);1==t?location.href=encodeURI("/viewUser?username="+a):0==t?alert("您还没有选择用户"):alert("请只选择一个用户")}),$("#editUserClick").click(function(){for(var e=$("input[name='userCheckBox']"),a="",t=0,r=0;r<e.length;r++)e[r].checked&&(a+=e[r].value,t++);1==t?location.href=encodeURI("/editUser?username="+a):0==t?alert("您还没有选择用户"):alert("请只选择一个用户")}),$("#delUserClick").click(function(){for(var e=$("input[name='userCheckBox']"),a="",t=0,r=0;r<e.length;r++)e[r].checked&&(a+=e[r].value,t++);1==t?$.ajax({url:"/delUser",data:{username:a},async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){"trueUser"==e?(alert("删除用户成功"),location.href="/users"):alert("数据传输有错误!")}}):0==t?alert("您还没有选择用户"):alert("请只选择一个用户")});var username=$.getUrlParam("username");$.ajax({url:"/viewUser",data:{username:username},async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){if(e){var a=JSON.parse(e)[0],t=a.id,r=a.username,n=a.password;$("#id").html(t),$("#username").html(r),$("#password").html(n)}else alert("数据传输有错误")}});