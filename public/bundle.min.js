"use strict";function swapCheck(){isCheckAll?($("input[type='checkbox']").each(function(){this.checked=!1}),isCheckAll=!1):($("input[type='checkbox']").each(function(){this.checked=!0}),isCheckAll=!0)}function display(){len=$("#carInfo tr").length-1,page=len%pageSize==0?len/pageSize:Math.floor(len/pageSize)+1,curPage=1,displayPage(1),$("#btn0").html("当前 "+curPage+"/"+page+" 页    每页 "),$("#count").html("数据总量 "+len+"   "),$("#pageSize").val(pageSize),$("#btn1").click(function(){curPage=1,direct=0,displayPage()}),$("#btn2").click(function(){direct=-1,displayPage()}),$("#btn3").click(function(){direct=1,displayPage()}),$("#btn4").click(function(){curPage=page,direct=0,displayPage()}),$("#btn5").click(function(){return curPage=1*$("#changePage").val(),/^[1-9]\d*$/.test(curPage)?curPage>page?void alert("超出数据页面"):(direct=0,void displayPage()):void alert("请输入正整数")}),$("#pageSizeSet").click(function(){if(pageSize=$("#pageSize").val(),!/^[1-9]\d*$/.test(pageSize))return void alert("请输入正整数");len=$("#carInfo tr").length-1,page=len%pageSize==0?len/pageSize:Math.floor(len/pageSize)+1,curPage=1,direct=0,displayPage()})}function displayPage(){return curPage<=1&&direct==-1?(direct=0,void alert("已经是第一页了")):curPage>=page&&1==direct?(direct=0,void alert("已经是最后一页了")):(lastPage=curPage,curPage=len>pageSize?(curPage+direct+len)%len:1,0==curPage&&(curPage=page),$("#btn0").html("当前 "+curPage+"/"+page+" 页    每页 "),begin=(curPage-1)*pageSize+1,end=begin+1*pageSize-1,end>len&&(end=len),$("#carInfo tr").hide(),void $("#carInfo tr").each(function(e){(e>=begin&&e<=end||0==e)&&$(this).show()}))}$("#addCar").click(function(e){e.preventDefault(),$.ajax({url:"/addCar",data:{addVin:$("#addVin").val(),addEngineNo:$("#addEngineNo").val(),addModel:$("#addModel").val(),addColor:$("#addColor").val(),addAddress:$("#addAddress").val(),addCarCard:$("#addCarCard").val(),addCityName:$("#addCityName").val(),addModelYear:$("#addModelYear").val(),addPurchaseDate:$("#addPurchaseDate").val(),addCarType:$("#addCarType").val(),addMemo:$("#addMemo").val(),addStatus:$("#addStatus").val(),addCreateUserId:$("#addCreateUserId").val(),addCreateTime:$("#addCreateTime").val()},async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){"true"==e?(alert("新增车辆成功"),location.href="/users"):"false1"==e?alert("车辆Vin不能为空"):alert("已有此车辆Vin")}})}),$(document).ready(function(){$.ajax({url:"/car",async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){if(e){e=JSON.parse(e);for(var a="",t=0;t<e.length;t++){var r=e[t],c=r.car_id,d=r.vin;a+='\n            <tr>\n              <td><input type="checkbox" name="carCheckBox" value= '+d+"></td>\n              <td>"+c+"</td>\n              <td>"+d+"</td>\n              <td>"+r.engine_no+"</td>\n              <td>"+r.model+"</td>\n              <td>"+r.color+"</td>\n              <td>"+r.address+"</td>\n              <td>"+r.car_card+"</td>\n              <td>"+r.city_name+"</td>\n              <td>"+r.model_year+"</td>\n              <td>"+r.purchase_date+"</td>\n              <td>"+r.memo+"</td>\n            </tr>\n        "}$("#carData").html(a),display()}else alert("数据传输有错误！")}})}),$("#delCarClick").click(function(){for(var e=$("input[name='carCheckBox']"),a="",t=0,r=0;r<e.length;r++)e[r].checked&&(a+=e[r].value,t++);1==t?$.ajax({url:"/delCar",data:{vin:a},async:!0,cache:!1,type:"POST",dataType:"text",success:function(e){"true"==e?(alert("删除车辆成功"),location.href="/car"):alert("数据传输有错误！")}}):0==t?alert("您还没有选择车辆"):alert("请只选择一个车辆")}),$("#editCarClick").click(function(){for(var e=$("input[name='carCheckBox']"),a="",t=0,r=0;r<e.length;r++)e[r].checked&&(a+=e[r].value,t++);1==t?location.href=encodeURI("/editCar?vin="+a):0==t?alert("您还没有选择车辆"):alert("请只选择一个车辆")}),$("#viewCarClick").click(function(){for(var e=$("input[name='carCheckBox']"),a="",t=0,r=0;r<e.length;r++)e[r].checked&&(a+=e[r].value,t++);1==t?location.href=encodeURI("/viewCar?vin="+a):0==t?alert("您还没有选择车辆"):alert("请只选择一个车辆")});var isCheckAll=!1,pageSize=10,curPage=0,lastPage,direct=0,len,page,begin,end;$.getUrlParam=function(e){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(a);return null!=t?decodeURI(t[2]):null};var vin=$.getUrlParam("vin");$.ajax({url:"/editCar",type:"POST",data:{vin:vin},async:!0,cache:!1,dataType:"text",success:function(e){if(e){var a=JSON.parse(e)[0],t=a.car_id,r=a.vin,c=a.engine_no,d=a.model,l=a.color,n=a.address,i=a.car_card,o=a.city_name,s=a.model_year,u=a.purchase_date,v=a.car_type,m=a.memo,h=a.status,g=a.create_user_id,p=a.create_time;$("#carId").html(t),$("#vin").html(r),$("#engineNo").val(c),$("#model").val(d),$("#color").val(l),$("#address").val(n),$("#carCard").val(i),$("#cityName").val(o),$("#modelYear").val(s),$("#purchaseDate").val(u),$("#carType").val(v),$("#memo").val(m),$("#status").val(h),$("#createUserId").val(g),$("#createTime").val(p)}else alert("数据传输错误！")}}),$("#confirm").click(function(){$.ajax({url:"/updateCar",type:"POST",data:{carId:$("#carId").html(),vin:$("#vin").html(),engineNo:$("#engineNo").val(),model:$("#model").val(),color:$("#color").val(),address:$("#address").val(),carCard:$("#carCard").val(),cityName:$("#cityName").val(),modelYear:$("#modelYear").val(),purchaseDate:$("#purchaseDate").val(),carType:$("#carType").val(),memo:$("#memo").val(),status:$("#status").val(),createUserId:$("#createUserId").val(),createTime:$("#createTime").val()},async:!0,cache:!1,dataType:"text",success:function(e){e&&(alert("修改车辆信息成功"),location.href="/car")}})}),$.getUrlParam=function(e){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(a);return null!=t?decodeURI(t[2]):null};var vin=$.getUrlParam("vin");$.ajax({url:"/viewCar",type:"POST",data:{vin:vin},async:!0,cache:!1,dataType:"text",success:function(e){var a=JSON.parse(e)[0],t=a.car_id,r=a.vin,c=a.engine_no,d=a.model,l=a.color,n=a.address,i=a.car_card,o=a.city_name,s=a.model_year,u=a.purchase_date,v=a.car_type,m=a.memo,h=a.status,g=a.create_user_id,p=a.create_time;$("#carId").html(t),$("#vin").html(r),$("#engineNo").html(c),$("#model").html(d),$("#color").html(l),$("#address").html(n),$("#carCard").html(i),$("#cityName").html(o),$("#modelYear").html(s),$("#purchaseDate").html(u),$("#carType").html(v),$("#memo").html(m),$("#status").html(h),$("#createUserId").html(g),$("#createTime").html(p)}});